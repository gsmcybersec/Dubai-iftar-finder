<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Search Mosques ‚Äî UAE Iftar Finder</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
:root{--g:#1B4332;--g2:#2D6A4F;--g3:#40916C;--gl:#D8F3DC;--gp:#F0FAF4;--gd:#D4A017;--gd2:#B5850A;--gdp:#FFFBEB;--w:#fff;--bg:#F7F5F0;--tx:#1C1C1E;--mu:#6B7280;--br:#E5DDD0;--sh:rgba(27,67,50,0.07)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'DM Sans',sans-serif;background:var(--bg);color:var(--tx)}
nav{background:var(--w);border-bottom:2px solid var(--gl);padding:0 2rem;display:flex;justify-content:space-between;align-items:center;height:64px;position:sticky;top:0;z-index:100;box-shadow:0 2px 12px var(--sh)}
.logo{display:flex;align-items:center;gap:.6rem;text-decoration:none}
.li{width:36px;height:36px;background:var(--g);border-radius:9px;display:flex;align-items:center;justify-content:center;font-size:1.1rem}
.lt{font-family:'Cormorant Garamond',serif;font-size:1.3rem;font-weight:700;color:var(--g)}
.lt span{color:var(--gd)}
.nr{display:flex;align-items:center;gap:.2rem}
.nr a{color:var(--mu);text-decoration:none;padding:.45rem .85rem;border-radius:7px;font-size:.875rem;font-weight:500;transition:all .2s}
.nr a:hover{color:var(--g);background:var(--gp)}
.na{background:var(--g)!important;color:#fff!important;font-weight:600!important}
.na:hover{background:var(--g2)!important;color:#fff!important}

.fb{background:var(--w);border-bottom:1px solid var(--br);padding:1.25rem 2rem;box-shadow:0 1px 8px var(--sh)}
.ff{max-width:1100px;margin:0 auto;display:flex;gap:.65rem;flex-wrap:wrap;align-items:center}
.fi{flex:2;min-width:180px;background:var(--bg);border:1.5px solid var(--br);border-radius:9px;padding:.7rem 1rem;color:var(--tx);font-size:.875rem;font-family:'DM Sans',sans-serif;outline:none;transition:border .2s}
.fi:focus{border-color:var(--g)}
.fs{flex:1;min-width:130px;background:var(--bg);border:1.5px solid var(--br);border-radius:9px;padding:.7rem .9rem;color:var(--tx);font-size:.85rem;font-family:'DM Sans',sans-serif;outline:none;cursor:pointer}
.fs:focus{border-color:var(--g)}
.bs{padding:.7rem 1.4rem;background:var(--g);color:#fff;border:none;border-radius:9px;font-size:.875rem;font-weight:600;cursor:pointer;font-family:'DM Sans',sans-serif;white-space:nowrap;transition:all .2s}
.bs:hover{background:var(--g2)}
.bc{padding:.7rem 1rem;background:transparent;color:var(--mu);border:1.5px solid var(--br);border-radius:9px;font-size:.82rem;cursor:pointer;text-decoration:none;font-family:'DM Sans',sans-serif}
.bc:hover{border-color:var(--g);color:var(--g)}

.chips{max-width:1100px;margin:.75rem auto 0;display:flex;gap:.4rem;flex-wrap:wrap}
.chip{display:inline-flex;align-items:center;gap:.25rem;background:var(--bg);border:1.5px solid var(--br);color:var(--mu);padding:.3rem .85rem;border-radius:999px;font-size:.79rem;font-weight:500;text-decoration:none;transition:all .2s}
.chip:hover,.chip.on{border-color:var(--g);color:var(--g);background:var(--gp)}
.chip.on{font-weight:600}

main{max-width:1140px;margin:0 auto;padding:1.75rem 1.5rem}
.rh{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;flex-wrap:wrap;gap:.75rem}
.rc{font-size:.9rem;color:var(--mu)}
.rc strong{color:var(--g);font-size:1.15rem}
.al{color:var(--gd2);font-weight:600;font-size:.875rem;text-decoration:none;padding:.4rem .9rem;border:1.5px solid rgba(181,133,10,.25);border-radius:8px;transition:all .2s}
.al:hover{background:var(--gdp)}

.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(310px,1fr));gap:1.1rem}
.mc{background:var(--w);border:1.5px solid var(--br);border-radius:15px;padding:1.5rem;transition:all .22s;text-decoration:none;color:inherit;display:block;box-shadow:0 2px 8px var(--sh);position:relative;overflow:hidden}
.mc::before{content:'';position:absolute;top:0;left:0;right:0;height:2.5px;background:linear-gradient(90deg,var(--g),var(--g3));opacity:0;transition:opacity .22s}
.mc:hover{transform:translateY(-2px);box-shadow:0 10px 28px var(--sh);border-color:var(--g3)}
.mc:hover::before{opacity:1}
.ct{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:.65rem;gap:.5rem}
.mn{font-family:'Cormorant Garamond',serif;font-size:1.15rem;font-weight:700;color:var(--g);line-height:1.2}
.ma{font-size:.88rem;color:var(--gd);direction:rtl;margin-top:.15rem;opacity:.8}
.vb{background:var(--gl);color:var(--g);border:1px solid rgba(27,67,50,.15);font-size:.68rem;padding:.2rem .55rem;border-radius:999px;white-space:nowrap;flex-shrink:0;font-weight:600}
.mloc{display:flex;align-items:center;gap:.35rem;color:var(--mu);font-size:.84rem;margin-bottom:.55rem}
.ftags{display:flex;gap:.35rem;flex-wrap:wrap;margin:.45rem 0}
.ft{background:var(--gdp);color:var(--gd2);font-size:.72rem;padding:.2rem .6rem;border-radius:999px;border:1px solid rgba(181,133,10,.2)}
.mnotes{font-size:.82rem;color:var(--mu);background:var(--bg);padding:.55rem .75rem;border-radius:8px;margin-top:.55rem;line-height:1.55;border:1px solid var(--br)}
.mfoot{margin-top:.9rem;padding-top:.8rem;border-top:1px solid var(--br);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:.4rem}
.metas{display:flex;gap:.85rem;flex-wrap:wrap}
.meta{font-size:.77rem;color:var(--mu);display:flex;align-items:center;gap:.25rem}
.wabtn{display:inline-flex;align-items:center;gap:.3rem;background:#f0fdf4;color:#16a34a;border:1px solid #bbf7d0;padding:.3rem .75rem;border-radius:7px;font-size:.77rem;font-weight:600;cursor:pointer;transition:all .2s;border:none;font-family:'DM Sans',sans-serif}
.wabtn:hover{background:#dcfce7}

.empty{text-align:center;padding:5rem 2rem;color:var(--mu)}
.empty .ei{font-size:3.5rem;margin-bottom:1rem}
.empty h3{font-size:1.2rem;color:var(--g);margin-bottom:.5rem}
.empty a{color:var(--gd2);font-weight:600;text-decoration:none}

.addcta{background:var(--g);border-radius:16px;padding:2.5rem;text-align:center;margin-top:2.5rem}
.addcta h3{font-family:'Cormorant Garamond',serif;font-size:1.5rem;color:#fff;margin-bottom:.5rem}
.addcta p{color:rgba(255,255,255,.6);font-size:.9rem;margin-bottom:1.25rem}
.addcta a{display:inline-block;padding:.75rem 2rem;background:var(--gd);color:var(--g);border-radius:9px;font-weight:700;text-decoration:none;font-size:.9rem}

footer{background:var(--g);padding:2rem;margin-top:2rem;text-align:center}
.fn{font-family:'Cormorant Garamond',serif;color:#fde68a;font-size:1.1rem;margin-bottom:.4rem}
.fl{display:flex;justify-content:center;gap:1.5rem;flex-wrap:wrap;margin-bottom:.4rem}
.fl a{color:rgba(255,255,255,.5);text-decoration:none;font-size:.85rem}
.fl a:hover{color:#fde68a}
.fco{font-size:.77rem;color:rgba(255,255,255,.3)}

@media(max-width:640px){
  nav{padding:0 1rem}
  .nr a:not(.na){display:none}
  .fb{padding:1rem}
  .fi,.fs,.bs{width:100%;min-width:unset}
  main{padding:1.25rem 1rem}
  .grid{grid-template-columns:1fr}
}
</style>
</head>
<body>
<nav>
  <a href="/" class="logo"><div class="li">üïå</div><span class="lt">UAE <span>Iftar</span> Finder</span></a>
  <div class="nr">
    <a href="/">Home</a>
    <a href="/add" class="na">+ Add</a>
  </div>
</nav>

<div class="fb">
  <form action="/search" method="get" class="ff">
    <input class="fi" type="text" name="q" placeholder="üîç Mosque, area, food type..." value="{{ query }}">
    <select class="fs" name="city">
      <option value="">üèôÔ∏è All Emirates</option>
      {% for c in cities %}<option value="{{ c.city }}" {% if c.city==city %}selected{% endif %}>{{ c.city }}</option>{% endfor %}
    </select>
    <select class="fs" name="food">
      <option value="">üçΩÔ∏è All Food</option>
      {% for ft in food_types %}<option value="{{ ft }}" {% if ft==food %}selected{% endif %}>{{ ft }}</option>{% endfor %}
    </select>
    <select class="fs" name="iftar_time">
      <option value="">‚è∞ Any Time</option>
      <option value="Maghrib" {% if iftar_time=='Maghrib' %}selected{% endif %}>Maghrib</option>
      <option value="After Asr" {% if iftar_time=='After Asr' %}selected{% endif %}>After Asr (Early)</option>
    </select>
    <button type="submit" class="bs">Search ‚Üí</button>
    {% if query or city or food or iftar_time %}<a href="/search" class="bc">‚úï Clear</a>{% endif %}
  </form>
  <div class="chips">
    {% for ft in food_types %}
    <a href="/search?food={{ ft }}{% if city %}&city={{ city }}{% endif %}" class="chip {% if food==ft %}on{% endif %}">{{ ft }}</a>
    {% endfor %}
    <a href="/search?iftar_time=After+Asr" class="chip {% if iftar_time=='After Asr' %}on{% endif %}">‚è∞ After Asr</a>
  </div>
</div>

<main>
  <div class="rh">
    <div class="rc">
      <strong>{{ mosques|length }}</strong> mosque{% if mosques|length!=1 %}s{% endif %}
      {% if city %} in <em>{{ city }}</em>{% endif %}
      {% if food %} ¬∑ <em>{{ food }}</em>{% endif %}
      {% if query %} ¬∑ "<em>{{ query }}</em>"{% endif %}
    </div>
    <a href="/add" class="al">+ Add Missing Mosque</a>
  </div>

  {% if mosques %}
  <div class="grid">
    {% for m in mosques %}
    <a href="/mosque/{{ m.id }}" class="mc">
      <div class="ct">
        <div>
          <div class="mn">{{ m.name }}</div>
          {% if m.arabic_name %}<div class="ma">{{ m.arabic_name }}</div>{% endif %}
        </div>
        {% if m.verified %}<span class="vb">‚úì Verified</span>{% endif %}
      </div>
      <div class="mloc">üìç {{ m.area }}, {{ m.city }}</div>
      {% if m.food_type %}
      <div class="ftags">{% for ft in m.food_type.split(',') %}<span class="ft">{{ ft.strip() }}</span>{% endfor %}</div>
      {% endif %}
      {% if m.notes %}<div class="mnotes">{{ m.notes[:120] }}{% if m.notes|length>120 %}‚Ä¶{% endif %}</div>{% endif %}
      <div class="mfoot">
        <div class="metas">
          <span class="meta">üåô {{ m.iftar_time or 'Maghrib' }}</span>
          {% if m.capacity %}<span class="meta">üë• ~{{ m.capacity }}</span>{% endif %}
          {% if m.contact %}<span class="meta">üìû {{ m.contact }}</span>{% endif %}
        </div>
        <button class="wabtn" onclick="event.preventDefault();wa('{{ m.name }}','{{ m.city }}','{{ m.area }}')">üì≤ Share</button>
      </div>
    </a>
    {% endfor %}
  </div>
  {% else %}
  <div class="empty">
    <div class="ei">üïå</div>
    <h3>No mosques found</h3>
    <p style="margin-top:.5rem">Try a different search or <a href="/add">add this mosque</a></p>
  </div>
  {% endif %}

  <div class="addcta">
    <h3>Know a Mosque Offering Iftar?</h3>
    <p>Help the UAE community ‚Äî add it in seconds.</p>
    <a href="/add">+ Add Mosque</a>
  </div>
</main>

<footer>
  <div class="fn">Built by Muhammad Farooque üåô</div>
  <div class="fl"><a href="/">Home</a><a href="/search">Browse</a><a href="/add">Add Mosque</a><a href="mailto:technogsmfarooq@gmail.com">üìß Contact</a></div>
  <div class="fco">UAE Iftar Finder ¬∑ Ramadan Kareem üåô</div>
</footer>

<script>
function wa(name,city,area){
  const url=window.location.origin+window.location.pathname;
  const text=`üïå *${name}*\nüìç ${area}, ${city}, UAE\nüåô Free Iftar this Ramadan!\n\nFind more UAE Iftar mosques:\n${window.location.origin}`;
  window.open('https://wa.me/?text='+encodeURIComponent(text),'_blank');
}
</script>
</body>
</html>
