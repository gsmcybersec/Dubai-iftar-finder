<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UAE Iftar Finder â€” Find Free Iftar Meals Across UAE</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,600;0,700;1,500&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
:root{
  --g:#1B4332;--g2:#2D6A4F;--g3:#40916C;--gl:#D8F3DC;--gp:#F0FAF4;
  --gd:#D4A017;--gd2:#B5850A;--gdp:#FFFBEB;
  --w:#FFFFFF;--bg:#F7F5F0;--tx:#1C1C1E;--mu:#6B7280;
  --br:#E5DDD0;--sh:rgba(27,67,50,0.07);
}
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{font-family:'DM Sans',sans-serif;background:var(--bg);color:var(--tx)}

nav{background:var(--w);border-bottom:2px solid var(--gl);padding:0 2rem;display:flex;justify-content:space-between;align-items:center;height:64px;position:sticky;top:0;z-index:100;box-shadow:0 2px 16px var(--sh)}
.logo{display:flex;align-items:center;gap:.6rem;text-decoration:none}
.logo-i{width:36px;height:36px;background:var(--g);border-radius:9px;display:flex;align-items:center;justify-content:center;font-size:1.1rem}
.logo-t{font-family:'Cormorant Garamond',serif;font-size:1.3rem;font-weight:700;color:var(--g)}
.logo-t span{color:var(--gd)}
.nav-r{display:flex;align-items:center;gap:.2rem}
.nav-r a{color:var(--mu);text-decoration:none;padding:.45rem .85rem;border-radius:7px;font-size:.875rem;font-weight:500;transition:all .2s}
.nav-r a:hover{color:var(--g);background:var(--gp)}
.nav-add{background:var(--g)!important;color:#fff!important;font-weight:600!important}
.nav-add:hover{background:var(--g2)!important;color:#fff!important}

.nb{background:linear-gradient(90deg,var(--g),var(--g2));color:#fff;padding:.65rem 1.5rem;text-align:center;font-size:.84rem;display:none;align-items:center;justify-content:center;gap:.6rem;flex-wrap:wrap}
.nb.show{display:flex}
.nd{width:7px;height:7px;background:#86efac;border-radius:50%;animation:blink 1.4s infinite;flex-shrink:0}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.3}}

.sb{background:#dcfce7;border-bottom:1px solid #bbf7d0;color:#166534;padding:.75rem 1.5rem;text-align:center;font-size:.875rem}

.hero{background:var(--w);padding:5rem 1.5rem 4rem;text-align:center;border-bottom:1px solid var(--br);position:relative;overflow:hidden}
.hero::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--g),var(--gd),var(--g3))}
.hbadge{display:inline-flex;align-items:center;gap:.4rem;background:var(--gp);color:var(--g);padding:.35rem 1rem;border-radius:999px;font-size:.78rem;font-weight:600;margin-bottom:1.5rem;border:1px solid var(--gl)}
.htag{font-family:'Cormorant Garamond',serif;font-style:italic;font-size:clamp(.9rem,2vw,1.1rem);color:var(--mu);margin-bottom:.6rem}
.htitle{font-family:'Cormorant Garamond',serif;font-size:clamp(2.8rem,6.5vw,4.8rem);font-weight:700;color:var(--g);line-height:1.05;margin-bottom:.6rem}
.htitle .gd{color:var(--gd)}
.har{font-size:clamp(.9rem,2vw,1.2rem);color:var(--mu);direction:rtl;margin-bottom:.75rem;font-style:italic}
.hdesc{font-size:.95rem;color:var(--mu);max-width:460px;margin:0 auto 2.5rem;line-height:1.75}

.pw{background:var(--bg);border:1.5px solid var(--br);border-radius:14px;padding:1.2rem 1.5rem;max-width:660px;margin:0 auto 2rem;text-align:left}
.pwh{display:flex;justify-content:space-between;align-items:center;margin-bottom:.9rem;flex-wrap:wrap;gap:.4rem}
.pwl{font-size:.65rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:var(--g)}
.pwc{font-size:.78rem;color:var(--mu)}
.pr{display:flex;gap:.5rem;justify-content:center;flex-wrap:wrap}
.pi{flex:1;min-width:68px;text-align:center;padding:.55rem .3rem;border-radius:9px;border:1.5px solid transparent;transition:all .2s}
.pi.active{background:var(--g);border-color:var(--g)}
.pi.active .pn{color:rgba(255,255,255,.6)}
.pi.active .pt{color:#fff}
.pn{font-size:.62rem;text-transform:uppercase;letter-spacing:.07em;color:var(--mu);margin-bottom:.2rem}
.pt{font-size:.9rem;font-weight:600;color:var(--tx)}
.pnx{margin-top:.8rem;padding-top:.8rem;border-top:1px solid var(--br);text-align:center;font-size:.8rem;color:var(--mu)}
.pnx span{color:var(--g);font-weight:600}
.pload{text-align:center;padding:.5rem;color:var(--mu);font-size:.875rem}

.sw{max-width:600px;margin:0 auto 1.5rem}
.sb2{background:var(--w);border:1.5px solid var(--br);border-radius:14px;padding:1rem;display:flex;gap:.65rem;flex-wrap:wrap;box-shadow:0 4px 20px var(--sh)}
.si{flex:2;min-width:180px;background:var(--bg);border:1.5px solid var(--br);border-radius:9px;padding:.75rem 1rem;color:var(--tx);font-size:.9rem;font-family:'DM Sans',sans-serif;outline:none;transition:border .2s}
.si:focus{border-color:var(--g)}
.ss{flex:1;min-width:140px;background:var(--bg);border:1.5px solid var(--br);border-radius:9px;padding:.75rem .9rem;color:var(--tx);font-size:.875rem;font-family:'DM Sans',sans-serif;outline:none;cursor:pointer}
.ss:focus{border-color:var(--g)}
.bsearch{padding:.75rem 1.5rem;background:var(--g);color:#fff;border:none;border-radius:9px;font-size:.9rem;font-weight:600;cursor:pointer;font-family:'DM Sans',sans-serif;white-space:nowrap;transition:all .2s}
.bsearch:hover{background:var(--g2);transform:translateY(-1px);box-shadow:0 4px 14px rgba(27,67,50,.25)}

.nm{display:inline-flex;align-items:center;gap:.4rem;background:var(--gdp);color:var(--gd2);border:1.5px solid rgba(181,133,10,.2);padding:.55rem 1.2rem;border-radius:9px;font-size:.84rem;font-weight:600;cursor:pointer;transition:all .2s;font-family:'DM Sans',sans-serif;margin-bottom:2.5rem}
.nm:hover{background:#fef3c7;border-color:var(--gd)}

.stats{display:flex;gap:2.5rem;flex-wrap:wrap;justify-content:center}
.stat{text-align:center}
.sn{display:block;font-family:'Cormorant Garamond',serif;font-size:2.2rem;font-weight:700;color:var(--g);line-height:1}
.sl{font-size:.72rem;color:var(--mu);text-transform:uppercase;letter-spacing:.07em;margin-top:.3rem}

.dvd{height:1px;background:var(--br)}
.sec{padding:4rem 2rem;max-width:1140px;margin:0 auto}
.stag{font-size:.68rem;font-weight:700;letter-spacing:.13em;text-transform:uppercase;color:var(--g3);margin-bottom:.5rem}
.stitle{font-family:'Cormorant Garamond',serif;font-size:2rem;font-weight:700;color:var(--g);margin-bottom:.5rem;line-height:1.2}
.ssub{color:var(--mu);font-size:.9rem;max-width:440px}

.egrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(195px,1fr));gap:.85rem;margin-top:2rem}
.ecard{background:var(--w);border:1.5px solid var(--br);border-radius:13px;padding:1.25rem;text-decoration:none;color:inherit;transition:all .22s;display:flex;align-items:center;gap:.85rem;box-shadow:0 2px 8px var(--sh)}
.ecard:hover{border-color:var(--g);transform:translateY(-2px);box-shadow:0 8px 24px var(--sh)}
.ee{font-size:1.8rem;flex-shrink:0}
.en{font-weight:600;color:var(--g);font-size:.9rem}
.ec{font-size:.77rem;color:var(--mu);margin-top:.15rem}

.csec{padding:0 2rem 3rem;max-width:1140px;margin:0 auto}
.ctl{font-size:.68rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:var(--mu);margin-bottom:.8rem}
.chips{display:flex;gap:.5rem;flex-wrap:wrap}
.chip{display:inline-flex;align-items:center;gap:.3rem;background:var(--w);border:1.5px solid var(--br);color:var(--tx);padding:.4rem .95rem;border-radius:999px;font-size:.82rem;font-weight:500;text-decoration:none;transition:all .2s}
.chip:hover{border-color:var(--g);color:var(--g);background:var(--gp)}

.kgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(265px,1fr));gap:1rem;margin-top:2rem}
.kcard{background:var(--w);border:1.5px solid var(--br);border-radius:13px;padding:1.4rem;box-shadow:0 2px 8px var(--sh);transition:all .22s}
.kcard:hover{transform:translateY(-2px);box-shadow:0 8px 24px var(--sh);border-color:var(--gd)}
.ktag{display:inline-block;background:var(--gdp);color:var(--gd2);border:1px solid rgba(181,133,10,.2);font-size:.68rem;font-weight:700;padding:.2rem .65rem;border-radius:999px;text-transform:uppercase;letter-spacing:.07em;margin-bottom:.75rem}
.kcard h4{font-weight:600;color:var(--tx);margin-bottom:.35rem;font-size:.92rem}
.kcard p{font-size:.84rem;color:var(--mu);line-height:1.55}
.km{margin-top:.75rem;font-size:.77rem;color:var(--g3);font-weight:500}
.kadd{border-color:rgba(181,133,10,.25)!important;background:var(--gdp)!important}

.wgrid{display:grid;grid-template-columns:repeat(auto-fit,minmax(235px,1fr));gap:1rem;margin-top:2rem}
.wcard{background:var(--w);border:1.5px solid var(--br);border-radius:13px;padding:1.6rem;box-shadow:0 2px 8px var(--sh);transition:border .2s}
.wcard:hover{border-color:var(--g3)}
.wi{width:44px;height:44px;border-radius:11px;background:var(--gp);display:flex;align-items:center;justify-content:center;font-size:1.25rem;margin-bottom:1rem}
.wcard h3{font-size:.92rem;font-weight:600;color:var(--g);margin-bottom:.4rem}
.wcard p{font-size:.84rem;color:var(--mu);line-height:1.6}

.mband{background:var(--g);border-radius:20px;padding:4rem 3rem;margin:0 2rem 4rem;position:relative;overflow:hidden}
.mband::before{content:'';position:absolute;top:-60px;right:-60px;width:280px;height:280px;background:radial-gradient(circle,rgba(255,255,255,.05),transparent 70%);pointer-events:none}
.min{max-width:680px}
.mband .stag{color:rgba(255,255,255,.4)}
.mband .stitle{color:#fff;font-size:2.2rem}
.mt{color:rgba(255,255,255,.68);line-height:1.85;font-size:.95rem;margin-bottom:1rem}
.mt strong{color:#fde68a}
.md{font-size:.77rem;color:rgba(255,255,255,.35);margin-top:1.5rem;padding-top:1.25rem;border-top:1px solid rgba(255,255,255,.1);line-height:1.6}
.mbtns{display:flex;gap:1rem;flex-wrap:wrap;margin-top:2rem}
.bw{display:inline-flex;align-items:center;gap:.4rem;padding:.8rem 1.75rem;background:#fff;color:var(--g);border-radius:9px;font-weight:700;text-decoration:none;transition:all .2s;font-size:.9rem}
.bw:hover{background:var(--bg);transform:translateY(-1px)}
.bow{display:inline-flex;align-items:center;gap:.4rem;padding:.8rem 1.75rem;background:transparent;color:#fff;border:1.5px solid rgba(255,255,255,.3);border-radius:9px;font-weight:600;text-decoration:none;transition:all .2s;font-size:.9rem}
.bow:hover{border-color:#fff;background:rgba(255,255,255,.08)}

footer{background:var(--g);padding:2.5rem 2rem 1.5rem}
.fi{max-width:1100px;margin:0 auto;display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:2rem;padding-bottom:1.5rem;border-bottom:1px solid rgba(255,255,255,.12)}
.fb .fn{font-family:'Cormorant Garamond',serif;font-size:1.2rem;font-weight:700;color:#fde68a;margin-bottom:.3rem}
.fb .fs{font-size:.82rem;color:rgba(255,255,255,.45)}
.fl{display:flex;gap:2rem;flex-wrap:wrap}
.fl a{color:rgba(255,255,255,.55);text-decoration:none;font-size:.875rem;transition:color .2s}
.fl a:hover{color:#fde68a}
.fbot{max-width:1100px;margin:.75rem auto 0;display:flex;justify-content:space-between;flex-wrap:wrap;gap:.5rem}
.fc{font-size:.77rem;color:rgba(255,255,255,.3)}

@media(max-width:640px){
  nav{padding:0 1rem}
  .nav-r a:not(.nav-add){display:none}
  .hero{padding:3.5rem 1rem 3rem}
  .sb2{flex-direction:column}
  .si,.ss,.bsearch{width:100%;min-width:unset}
  .stats{gap:1.5rem}
  .sec{padding:3rem 1rem}
  .csec{padding:0 1rem 2rem}
  .mband{margin:0 1rem 3rem;padding:2.5rem 1.5rem}
  .fi{flex-direction:column}
}
</style>
</head>
<body>
{% if request.args.get('added') %}
<div class="sb">âœ… Mosque submitted! It will appear after review. Jazakallah Khair ğŸŒ™</div>
{% endif %}

<div class="nb" id="nb">
  <span class="nd"></span>
  <span id="nbt">ğŸ”” Etisalat distributing free Iftar kits at Union Metro â€” until 6:30 PM today!</span>
  <button onclick="document.getElementById('nb').classList.remove('show')" class="notif-close" style="background:rgba(255,255,255,.15);border:none;color:#fff;width:20px;height:20px;border-radius:50%;cursor:pointer;font-size:.7rem;margin-left:.5rem">âœ•</button>
</div>

<nav>
  <a href="/" class="logo">
    <div class="logo-i">ğŸ•Œ</div>
    <span class="logo-t">UAE <span>Iftar</span> Finder</span>
  </a>
  <div class="nav-r">
    <a href="/search">Browse</a>
    <a href="/search?iftar_time=After+Asr">â° Early Iftar</a>
    <a href="/search?food=Biryani">ğŸš Biryani</a>
    <a href="/add" class="nav-add">+ Add Mosque</a>
  </div>
</nav>

<section class="hero">
  <div class="hbadge">ğŸŒ™ Ramadan 2026 Â· All 7 UAE Emirates</div>
  <p class="htag">"A Place of Blessings, A Meal for Everyone"</p>
  <h1 class="htitle">Find <span class="gd">Iftar</span><br>Near You in UAE</h1>
  <p class="har">Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø³Ø§Ø¬Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± ÙÙŠ Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©</p>
  <p class="hdesc">Your guide to discovering mosques and community spots serving Iftar meals during Ramadan across the UAE.</p>

  <div class="pw">
    <div class="pwh">
      <span class="pwl">ğŸ• Today's Prayer Times</span>
      <span class="pwc" id="pwc">ğŸ“ Dubai, UAE</span>
    </div>
    <div id="pc"><div class="pload">Loading prayer times...</div></div>
  </div>

  <div class="sw">
    <form action="/search" method="get" class="sb2">
      <input class="si" type="text" name="q" placeholder="ğŸ” Mosque, area, Biryani, Mandi...">
      <select class="ss" name="city" id="cs">
        <option value="">ğŸ™ï¸ All Emirates</option>
        {% for c in cities %}
        <option value="{{ c.city }}">{{ c.city }} ({{ c.cnt }})</option>
        {% endfor %}
      </select>
      <button type="submit" class="bsearch">Search</button>
    </form>
  </div>

  <button class="nm" onclick="findNearMe()">ğŸ“ Find Nearest Mosque</button>

  <div class="stats">
    <div class="stat"><span class="sn">{{ total }}+</span><span class="sl">Mosques</span></div>
    <div class="stat"><span class="sn">7</span><span class="sl">Emirates</span></div>
    <div class="stat"><span class="sn">Free</span><span class="sl">Iftar Meals</span></div>
    <div class="stat"><span class="sn">Live</span><span class="sl">Prayer Times</span></div>
  </div>
</section>

<div class="dvd"></div>

<div class="sec">
  <div class="stag">Browse by Location</div>
  <h2 class="stitle">Choose Your Emirate</h2>
  <p class="ssub">All 7 Emirates covered â€” tap to find Iftar near you</p>
  {% set icons={'Dubai':'ğŸ™ï¸','Abu Dhabi':'ğŸ›ï¸','Sharjah':'ğŸŒ¿','Ajman':'âš“','Ras Al Khaimah':'â›°ï¸','Fujairah':'ğŸŒŠ','Umm Al Quwain':'ğŸŒ´','Al Ain':'ğŸŒº'} %}
  <div class="egrid">
    {% for c in cities %}
    <a href="/search?city={{ c.city }}" class="ecard">
      <div class="ee">{{ icons.get(c.city,'ğŸ•Œ') }}</div>
      <div>
        <div class="en">{{ c.city }}</div>
        <div class="ec">{{ c.cnt }} mosque{% if c.cnt!=1 %}s{% endif %}</div>
      </div>
    </a>
    {% endfor %}
  </div>
</div>

<div class="csec">
  <div class="ctl">Quick Filter by Food Type</div>
  <div class="chips">
    {% for ft in food_types %}
    <a href="/search?food={{ ft }}" class="chip">ğŸ½ï¸ {{ ft }}</a>
    {% endfor %}
    <a href="/search?iftar_time=After+Asr" class="chip">â° Early Iftar (After Asr)</a>
  </div>
</div>

<div class="dvd"></div>

<div class="sec">
  <div class="stag">Beyond Mosques</div>
  <h2 class="stitle">Iftar Kits & Community Spots</h2>
  <p class="ssub">Metro stations, parks and community centres distributing Iftar kits</p>
  <div class="kgrid">
    <div class="kcard">
      <div class="ktag">ğŸš‡ Metro Station</div>
      <h4>Union Metro Station, Dubai</h4>
      <p>Multiple organisations distribute Iftar kits near the main entrance. Dates, water and meal boxes before Maghrib.</p>
      <div class="km">ğŸ“ Deira, Dubai Â· ğŸŒ™ Before Maghrib</div>
    </div>
    <div class="kcard">
      <div class="ktag">ğŸ¢ Workers Area</div>
      <h4>Al Quoz Labor Camps</h4>
      <p>Various charities distribute free Iftar meal boxes to workers in Al Quoz industrial area daily.</p>
      <div class="km">ğŸ“ Al Quoz, Dubai Â· ğŸŒ™ Maghrib</div>
    </div>
    <div class="kcard">
      <div class="ktag">ğŸ“¦ Community Spot</div>
      <h4>Karama Park, Dubai</h4>
      <p>Volunteer-run Iftar distribution. Biryani and meal boxes. Limited quantities â€” come early.</p>
      <div class="km">ğŸ“ Al Karama, Dubai Â· ğŸŒ™ 5:00 PM+</div>
    </div>
    <div class="kcard kadd">
      <div class="ktag">â• Add a Spot</div>
      <h4 style="color:var(--gd2)">Know an Iftar Kit Location?</h4>
      <p>Metro, park, camp or anywhere distributing kits â€” add it for the community.</p>
      <div style="margin-top:1rem"><a href="/add" style="color:var(--gd2);font-weight:600;font-size:.85rem;text-decoration:none">Add Location â†’</a></div>
    </div>
  </div>
</div>

<div class="dvd"></div>

<div class="sec">
  <div class="stag">Why UAE Iftar Finder</div>
  <h2 class="stitle">Your Trusted Ramadan Guide</h2>
  <div class="wgrid">
    <div class="wcard"><div class="wi">ğŸ•</div><h3>Live Prayer Times</h3><p>Real-time daily prayer times for every UAE emirate. Know exactly when Maghrib is today.</p></div>
    <div class="wcard"><div class="wi">ğŸ“</div><h3>Find Nearest Mosque</h3><p>Use your GPS to instantly find the closest mosque offering Iftar to your location.</p></div>
    <div class="wcard"><div class="wi">ğŸ½ï¸</div><h3>Filter by Food</h3><p>Looking for Biryani or Mandi? Filter by food type and find exactly what's being served.</p></div>
    <div class="wcard"><div class="wi">ğŸ“²</div><h3>WhatsApp Share</h3><p>Share any Iftar spot with friends and family instantly on WhatsApp with one tap.</p></div>
    <div class="wcard"><div class="wi">ğŸ‘¥</div><h3>Community Powered</h3><p>Built and updated by locals. Real notes verified by the community for the community.</p></div>
    <div class="wcard"><div class="wi">ğŸ””</div><h3>Live Announcements</h3><p>Real-time alerts when organisations are distributing Iftar kits at public spots right now.</p></div>
  </div>
</div>

<div class="mband">
  <div class="min">
    <div class="stag">Our Mission</div>
    <h2 class="stitle">No One Goes Hungry<br>This Ramadan</h2>
    <p class="mt">The UAE is home to over <strong>3 million Muslims</strong> from every corner of the world â€” labourers, professionals, families and students â€” all observing Ramadan far from home.</p>
    <p class="mt">Our mission is simple: <strong>connect people with Iftar</strong>. Whether you just finished a long shift, or want to break your fast with the community â€” UAE Iftar Finder helps you find a meal and a home.</p>
    <div class="mbtns">
      <a href="/search" class="bw">ğŸ” Find Iftar Now</a>
      <a href="/add" class="bow">+ Add a Mosque</a>
    </div>
    <p class="md">âš ï¸ Disclaimer: We are a community directory. Food availability may change daily â€” please verify before travelling.</p>
  </div>
</div>

<footer>
  <div class="fi">
    <div class="fb">
      <div class="fn">UAE Iftar Finder ğŸŒ™</div>
      <div class="fs">Built by Muhammad Farooque Â· Ramadan Kareem</div>
    </div>
    <div class="fl">
      <a href="/search">Browse Mosques</a>
      <a href="/add">Add Mosque</a>
      <a href="mailto:technogsmfarooq@gmail.com">ğŸ“§ Contact</a>
      <a href="https://wa.me/?text=Find+free+Iftar+in+UAE+during+Ramadan%3A+https%3A%2F%2Fdubai-iftar-finder-production.up.railway.app" target="_blank">ğŸ“² Share App</a>
    </div>
  </div>
  <div class="fbot">
    <span class="fc">Â© 2026 UAE Iftar Finder Â· Built with â¤ï¸ for the UAE community</span>
    <span class="fc">Verify food availability before travelling</span>
  </div>
</footer>

<script>
async function loadPrayer(city='Dubai'){
  const c=document.getElementById('pc');
  try{
    const d=new Date();
    const url=`https://api.aladhan.com/v1/timingsByCity/${String(d.getDate()).padStart(2,'0')}-${String(d.getMonth()+1).padStart(2,'0')}-${d.getFullYear()}?city=${encodeURIComponent(city)}&country=UAE&method=8`;
    const res=await fetch(url);const data=await res.json();
    if(data.code!==200)throw new Error();
    const t=data.data.timings;
    const now=d.getHours()*60+d.getMinutes();
    const ps=[{n:'Fajr',t:t.Fajr},{n:'Sunrise',t:t.Sunrise},{n:'Dhuhr',t:t.Dhuhr},{n:'Asr',t:t.Asr},{n:'Maghrib',t:t.Maghrib},{n:'Isha',t:t.Isha}];
    const tm=s=>{const[h,m]=s.split(':').map(Number);return h*60+m;};
    let ai=0;ps.forEach((p,i)=>{if(now>=tm(p.t))ai=i;});
    const ni=(ai+1)%ps.length;
    const df=tm(ps[ni].t)-now;
    const cd=df>0?`${Math.floor(df/60)}h ${df%60}m`:'Soon';
    c.innerHTML=`<div class="pr">${ps.map((p,i)=>`<div class="pi ${i===ai?'active':''}"><div class="pn">${p.n}</div><div class="pt">${p.t}</div></div>`).join('')}</div><div class="pnx">Next: <span>${ps[ni].n}</span> at <span>${ps[ni].t}</span> Â· in <span>${cd}</span> Â· ğŸŒ™ Iftar (Maghrib): <span>${t.Maghrib}</span></div>`;
  }catch(e){c.innerHTML=`<div class="pload" style="color:#dc2626">Could not load prayer times</div>`;}
}
const cs=document.getElementById('cs');
loadPrayer(cs?.value||'Dubai');
cs?.addEventListener('change',()=>{
  document.getElementById('pwc').textContent=`ğŸ“ ${cs.value||'Dubai'}, UAE`;
  loadPrayer(cs.value||'Dubai');
});
function findNearMe(){
  if(!navigator.geolocation){alert('Location not supported');return;}
  const b=document.querySelector('.nm');
  b.textContent='ğŸ“ Finding location...';b.disabled=true;
  navigator.geolocation.getCurrentPosition(
    p=>{window.location.href=`/search?lat=${p.coords.latitude}&lng=${p.coords.longitude}&near=1`;},
    ()=>{b.textContent='ğŸ“ Find Nearest Mosque';b.disabled=false;alert('Please allow location access.');}
  );
}
</script>
</body>
</html>
