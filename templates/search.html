<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Search Results ‚Äî Dubai Iftar Finder</title>
<link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --green:#1a4731; --green-mid:#2d6a4f; --green-light:#52b788;
    --gold:#d4a017; --gold-light:#f0c040;
    --cream:#fdf6ec; --white:#ffffff; --text:#1c1c1c; --muted:#6b7280;
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body { font-family:'DM Sans',sans-serif; background:var(--cream); color:var(--text); }

  header {
    background:linear-gradient(135deg, var(--green), var(--green-mid));
    padding:1.2rem 2rem;
    display:flex; justify-content:space-between; align-items:center;
  }
  .logo { font-family:'Amiri',serif; color:var(--gold-light); font-size:1.3rem; text-decoration:none; }
  .nav-links a { color:rgba(255,255,255,0.75); text-decoration:none; margin-left:1.5rem; font-size:0.9rem; }
  .nav-links a:hover { color:var(--gold-light); }

  .search-bar {
    background:var(--green);
    padding:1.5rem 2rem;
  }
  .search-form { max-width:800px; margin:0 auto; display:flex; gap:0.75rem; flex-wrap:wrap; }
  .search-input {
    flex:1; min-width:200px;
    padding:0.75rem 1.1rem;
    border-radius:8px; border:1px solid rgba(255,255,255,0.25);
    background:rgba(255,255,255,0.15); color:white;
    font-size:0.95rem; outline:none;
  }
  .search-input::placeholder { color:rgba(255,255,255,0.5); }
  .search-input:focus { border-color:var(--gold-light); }
  .search-select {
    padding:0.75rem 1rem; border-radius:8px;
    border:1px solid rgba(255,255,255,0.25);
    background:rgba(255,255,255,0.15); color:white;
    font-size:0.9rem; outline:none;
  }
  .search-select option { background:var(--green); }
  .btn-search {
    padding:0.75rem 1.5rem; background:var(--gold);
    color:var(--green); border:none; border-radius:8px;
    font-weight:600; cursor:pointer;
  }

  main { max-width:1100px; margin:0 auto; padding:2rem 1.5rem; }

  .results-header {
    display:flex; justify-content:space-between; align-items:center;
    margin-bottom:1.5rem; flex-wrap:wrap; gap:0.75rem;
  }
  .results-count { font-size:1rem; color:var(--muted); }
  .results-count strong { color:var(--green); font-size:1.3rem; }

  .grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(300px,1fr)); gap:1.25rem; }

  .mosque-card {
    background:white; border-radius:14px;
    border:1px solid #e8ede8;
    padding:1.5rem;
    transition:transform .2s, box-shadow .2s;
    text-decoration:none; color:inherit;
    display:block;
  }
  .mosque-card:hover { transform:translateY(-3px); box-shadow:0 8px 30px rgba(0,0,0,0.08); }

  .card-top { display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:0.75rem; }
  .mosque-name { font-family:'Amiri',serif; font-size:1.25rem; color:var(--green); font-weight:700; line-height:1.2; }
  .mosque-arabic { font-family:'Amiri',serif; font-size:0.95rem; color:var(--gold); direction:rtl; }
  .verified-badge {
    background:#d1fae5; color:#065f46;
    font-size:0.7rem; padding:0.2rem 0.5rem;
    border-radius:999px; white-space:nowrap;
  }

  .mosque-area {
    display:flex; align-items:center; gap:0.4rem;
    color:var(--muted); font-size:0.875rem; margin-bottom:0.5rem;
  }
  .mosque-notes {
    font-size:0.85rem; color:#4b5563;
    background:#f3f4f6; padding:0.5rem 0.75rem;
    border-radius:8px; margin-top:0.75rem;
    line-height:1.4;
  }
  .mosque-footer {
    margin-top:1rem; padding-top:0.75rem;
    border-top:1px solid #f0f0f0;
    display:flex; gap:1rem; flex-wrap:wrap;
  }
  .mosque-meta { font-size:0.8rem; color:var(--muted); display:flex; align-items:center; gap:0.3rem; }

  .empty-state {
    text-align:center; padding:5rem 2rem; color:var(--muted);
  }
  .empty-state .icon { font-size:4rem; margin-bottom:1rem; }
  .empty-state h3 { font-size:1.3rem; color:var(--green); margin-bottom:0.5rem; }
  .empty-state a { color:var(--gold); text-decoration:none; font-weight:600; }

  .add-cta {
    background:linear-gradient(135deg,var(--green),var(--green-mid));
    border-radius:14px; padding:2rem; text-align:center;
    color:white; margin-top:3rem;
  }
  .add-cta h3 { font-family:'Amiri',serif; font-size:1.5rem; margin-bottom:0.5rem; }
  .add-cta p { color:rgba(255,255,255,0.7); font-size:0.9rem; margin-bottom:1rem; }
  .btn-add {
    display:inline-block; padding:0.75rem 2rem;
    background:var(--gold); color:var(--green);
    border-radius:8px; font-weight:600; text-decoration:none;
  }
</style>
</head>
<body>

<header>
  <a href="/" class="logo">üïå Dubai Iftar Finder</a>
  <div class="nav-links">
    <a href="/search">Browse All</a>
    <a href="/add">Add Mosque</a>
  </div>
</header>

<div class="search-bar">
  <form action="/search" method="get" class="search-form">
    <input class="search-input" type="text" name="q" placeholder="Search mosque name or area..." value="{{ query }}">
    <select class="search-select" name="area">
      <option value="">All Areas</option>
      {% for a in areas %}
      <option value="{{ a.area }}" {% if a.area == area %}selected{% endif %}>{{ a.area }}</option>
      {% endfor %}
    </select>
    <button type="submit" class="btn-search">üîç Search</button>
  </form>
</div>

<main>
  <div class="results-header">
    <div class="results-count">
      <strong>{{ mosques|length }}</strong> mosque{% if mosques|length != 1 %}s{% endif %} found
      {% if query %} for "<em>{{ query }}</em>"{% endif %}
      {% if area %} in <em>{{ area }}</em>{% endif %}
    </div>
    <a href="/add" style="color:var(--gold);font-weight:600;font-size:0.9rem;text-decoration:none;">+ Add Missing Mosque</a>
  </div>

  {% if mosques %}
  <div class="grid">
    {% for m in mosques %}
    <a href="/mosque/{{ m.id }}" class="mosque-card">
      <div class="card-top">
        <div>
          <div class="mosque-name">{{ m.name }}</div>
          {% if m.arabic_name %}<div class="mosque-arabic">{{ m.arabic_name }}</div>{% endif %}
        </div>
        {% if m.verified %}<span class="verified-badge">‚úì Verified</span>{% endif %}
      </div>

      <div class="mosque-area">üìç {{ m.area }}{% if m.address %}, {{ m.address }}{% endif %}</div>

      {% if m.notes %}
      <div class="mosque-notes">{{ m.notes }}</div>
      {% endif %}

      <div class="mosque-footer">
        <span class="mosque-meta">üåô Iftar at {{ m.iftar_time }}</span>
        {% if m.capacity %}<span class="mosque-meta">üë• ~{{ m.capacity }} people</span>{% endif %}
        {% if m.contact %}<span class="mosque-meta">üìû {{ m.contact }}</span>{% endif %}
      </div>
    </a>
    {% endfor %}
  </div>
  {% else %}
  <div class="empty-state">
    <div class="icon">üïå</div>
    <h3>No mosques found</h3>
    <p>Try a different search. Or <a href="/add">add this mosque</a> to help others!</p>
  </div>
  {% endif %}

  <div class="add-cta">
    <h3>Know a Mosque Offering Iftar?</h3>
    <p>Help the community by adding it to our directory.</p>
    <a href="/add" class="btn-add">+ Add Mosque</a>
  </div>
</main>

</body>
</html>
